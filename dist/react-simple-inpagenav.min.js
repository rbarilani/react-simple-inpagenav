!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.SimpleInpagenav=t()}}(function(){return function t(e,n,i){function o(s,a){if(!n[s]){if(!e[s]){var c="function"==typeof require&&require;if(!a&&c)return c(s,!0);if(r)return r(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[s]={exports:{}};e[s][0].call(u.exports,function(t){var n=e[s][1][t];return o(n?n:t)},u,u.exports,t,e,n,i)}return n[s].exports}for(var r="function"==typeof require&&require,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(t,e,n){(function(t){"use strict";var n="undefined"!=typeof window?window.React:"undefined"!=typeof t?t.React:null,i="undefined"!=typeof window?window.$:"undefined"!=typeof t?t.$:null,o="undefined"!=typeof window?window._:"undefined"!=typeof t?t._:null,r="undefined"!=typeof window?window.$.scrollTo:"undefined"!=typeof t?t.$.scrollTo:null,s={SECTION_ID_SUFFIX:"__simple-inpagenav",DEBOUNCED_SCROLL_EVENT:"simple-inpagenav.scroll",SCROLL_EVENT:"scroll.simpleinapgenav",LOAD_EVENT:"load.simpleinpagenav",RESIZE_EVENT:"resize.simpleinpagenav",DEBOUNCED_SCROLL_EVENT_DELAY:300,DEFAULT_OPTIONS:{scrollThreshold:.4,scrollOffset:50,scrollTo:{duration:300,offset:-40}}},a=n.createClass({displayName:"BarItem",propTypes:{target:n.PropTypes.string.isRequired},render:function(){var t=this.props.currentTarget===this.props.target?"active":"";return n.createElement("li",null,n.createElement("a",{href:"#"+this.props.target,className:t,onClick:this.onClick},this.props.children))},onClick:function(t){t.preventDefault(),this.props.onClickCallback(this.props.target)}}),c=n.createClass({displayName:"Bar",componentDidMount:function(){n.Children.forEach(this.props.children,function(t){this.registerItem(t.props.target)},this)},render:function(){var t=!1,e=n.Children.map(this.props.children,function(e){return e.type===a?(t=!0,n.cloneElement(e,{currentTarget:this.props.currentTarget,onClickCallback:this.props.onItemClickCallback})):e},this);if(!t)throw'A "SimpleInpagenav.Navbar" component must have at least one "SimpleInpagenav.NavbarItem" child';return n.createElement("nav",{className:"simple-inpagenav-bar"},n.createElement("ul",null,e))},items:{},registerItem:function(t){if(this.items[t])throw'Target for an "NavbarItem" must be unique!';this.items[t]=t}}),l=n.createClass({displayName:"Section",propTypes:{target:n.PropTypes.string.isRequired},componentDidMount:function(){this.props.registerSection(this.props.target,this.getId())},getId:function(){return this.props.target+s.SECTION_ID_SUFFIX},render:function(){return n.createElement("div",{className:"simple-inpagenav-section",id:this.getId()},this.props.children)}}),u=n.createClass({displayName:"SimpleInpagenav",getInitialState:function(){return{currentTarget:null}},getDefaultProps:function(){return{options:o.extend({},s.DEFAULT_OPTIONS)}},componentDidMount:function(){this.$window.on(s.LOAD_EVENT,function(){this.debouncedScroll(),this.options=o.merge({},this.options,this.props.options||{}),this.hasUsableLocation()?(this.updatesCurrentTarget(this.getTargetFromLocation()),this.scrollTo(this.getSectionElement(this.getTargetFromLocation()),this.getOptions().scrollTo)):this.updatesCurrentTarget(),this.$window.on(s.DEBOUNCED_SCROLL_EVENT,function(){if(this.shouldReactOnScroll){var t=this.getCurrentSectionTarget();this.updatesLocation(t),this.updatesCurrentTarget(t)}}.bind(this)),this.$window.on(s.RESIZE_EVENT,function(){this.updatesSectionPositions()}.bind(this))}.bind(this))},componentWillUnmount:function(){this.$window.off(s.LOAD_EVENT),this.$window.off(s.RESIZE_EVENT),this.$window.off(s.SCROLL_EVENT),this.$window.off(s.DEBOUNCED_SCROLL_EVENT)},render:function(){var t=!1,e=n.Children.map(this.props.children,function(e){return e.type===l?(t=!0,n.cloneElement(e,{registerSection:this.registerSection})):e.type===c?n.cloneElement(e,{currentTarget:this.state.currentTarget,onItemClickCallback:this.onItemClick}):e},this);if(!t)throw'A "SimpleInpagenav" component must have at least one "SimpleInpagenav.Section" child';return n.createElement("div",{className:"simple-inpagenav"},e)},shouldReactOnScroll:!0,$window:i(window),sections:{},options:o.merge({},s.DEFAULT_OPTIONS),updatesCurrentTarget:function(t){this.setState({currentTarget:t||this.getCurrentSectionTarget()})},scrollTo:function(t,e){e.onAfter=function(){this.shouldReactOnScroll=!0}.bind(this),r(t,e)},onItemClick:function(t){this.shouldReactOnScroll=!1,this.scrollTo(this.getSectionElement(t),this.getOptions().scrollTo),this.updatesLocation(t),this.setState({currentTarget:t})},getCurrentSectionTarget:function(){var t=null,e=[];for(var n in this.sections)this.sections.hasOwnProperty(n)&&e.push({target:n,pos:this.sections[n]});if(e=o.sortByOrder(e,function(t){return t.pos},["desc"]),this.scrollReachTheBottom())return t=e[0].target;for(var i=0;i<e.length;i++)if(this.isTheVisibleArea(e[i].pos)){t=e[i].target;break}return t},updatesLocation:function(t){window.location.hash="#"+t},hasUsableLocation:function(){var t=this.getTargetFromLocation();return this.sections[t]?!0:!1},getTargetFromLocation:function(){return window.location.hash?window.location.hash.substr(1):null},debouncedScroll:function(){var t;this.$window.on(s.SCROLL_EVENT,function(e){t&&clearTimeout(t),t=setTimeout(function(){this.$window.trigger(s.DEBOUNCED_SCROLL_EVENT,{scrollEvent:e})}.bind(this),s.DEBOUNCED_SCROLL_EVENT_DELAY)}.bind(this))},scrollReachTheBottom:function(){return this.$window.scrollTop()+this.$window.height()===i(document).height()},isTheVisibleArea:function(t){var e=this.$window.scrollTop(),n=Math.round(this.$window.height()*this.getOptions().scrollThreshold);return t-n<e+this.getOptions().scrollOffset},getSectionElement:function(t){return i("#"+this.getSectionId(t))},getSectionId:function(t){return t+s.SECTION_ID_SUFFIX},getSectionPos:function(t){var e=i("#"+t);return Math.round(e.offset().top)},registerSection:function(t,e){if(this.sections[t])throw"Target for a section must be unique!";this.sections[t]=this.getSectionPos(e)},updatesSectionPositions:function(){for(var t in this.sections)this.sections.hasOwnProperty(t)&&(this.sections[t]=this.getSectionPos(this.getSectionId(t)))},getOptions:function(){return this.options}});u.Section=l,u.Bar=c,u.BarItem=a,e.exports=u}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1])(1)});