!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.SimpleInpagenav=t()}}(function(){return function t(e,n,i){function o(s,a){if(!n[s]){if(!e[s]){var c="function"==typeof require&&require;if(!a&&c)return c(s,!0);if(r)return r(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[s]={exports:{}};e[s][0].call(u.exports,function(t){var n=e[s][1][t];return o(n?n:t)},u,u.exports,t,e,n,i)}return n[s].exports}for(var r="function"==typeof require&&require,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(t,e,n){"use strict";var i=t("strict-uri-encode");n.extract=function(t){return t.split("?")[1]||""},n.parse=function(t){return"string"!=typeof t?{}:(t=t.trim().replace(/^(\?|#|&)/,""),t?t.split("&").reduce(function(t,e){var n=e.replace(/\+/g," ").split("="),i=n.shift(),o=n.length>0?n.join("="):void 0;return i=decodeURIComponent(i),o=void 0===o?null:decodeURIComponent(o),t.hasOwnProperty(i)?Array.isArray(t[i])?t[i].push(o):t[i]=[t[i],o]:t[i]=o,t},{}):{})},n.stringify=function(t){return t?Object.keys(t).sort().map(function(e){var n=t[e];return void 0===n?"":null===n?e:Array.isArray(n)?n.sort().map(function(t){return i(e)+"="+i(t)}).join("&"):i(e)+"="+i(n)}).filter(function(t){return t.length>0}).join("&"):""}},{"strict-uri-encode":2}],2:[function(t,e,n){"use strict";e.exports=function(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16)})}},{}],3:[function(t,e,n){(function(n){"use strict";var i="undefined"!=typeof window?window.React:"undefined"!=typeof n?n.React:null,o=t("./BarItem"),r=i.createClass({displayName:"Bar",componentDidMount:function(){i.Children.forEach(this.props.children,function(t){this.registerItem(t.props.target)},this)},render:function(){var t=!1,e=i.Children.map(this.props.children,function(e){return e.type===o?(t=!0,i.cloneElement(e,{currentTarget:this.props.currentTarget,onClickCallback:this.props.onItemClickCallback})):e},this);if(!t)throw'A "SimpleInpagenav.Navbar" component must have at least one "SimpleInpagenav.NavbarItem" child';return i.createElement("nav",{className:"simple-inpagenav-bar"},i.createElement("ul",null,e))},items:{},registerItem:function(t){if(this.items[t])throw'Target for an "NavbarItem" must be unique!';this.items[t]=t}});e.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./BarItem":4}],4:[function(t,e,n){(function(t){"use strict";var n="undefined"!=typeof window?window.React:"undefined"!=typeof t?t.React:null,i=n.createClass({displayName:"BarItem",propTypes:{target:n.PropTypes.string.isRequired},render:function(){var t=this.props.currentTarget===this.props.target?"active":"";return n.createElement("li",null,n.createElement("a",{href:"#"+this.props.target,className:t,onClick:this.onClick},this.props.children))},onClick:function(t){t.preventDefault(),this.props.onClickCallback(this.props.target)}});e.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],5:[function(t,e,n){(function(n){"use strict";var i="undefined"!=typeof window?window.React:"undefined"!=typeof n?n.React:null,o="undefined"!=typeof window?window.$:"undefined"!=typeof n?n.$:null,r="undefined"!=typeof window?window._:"undefined"!=typeof n?n._:null,s=t("../constants/Constants"),a=t("../utils/scrollto.js"),c=t("./BarItem"),l=t("./Bar"),u=t("./Section"),f=t("query-string"),d=i.createClass({displayName:"SimpleInpagenav",_hashParams:{},getInitialState:function(){return{currentTarget:null}},getDefaultProps:function(){return{options:r.extend({},s.DEFAULT_OPTIONS)}},componentDidMount:function(){this.$window.on(s.LOAD_EVENT,function(){this.debouncedScroll(),this.options=r.merge({},this.options,this.props.options||{}),this.hasUsableLocation()?(this.updatesCurrentTarget(this.getTargetFromLocation()),this.scrollTo(this.getSectionElement(this.getTargetFromLocation()),this.getOptions().scrollTo)):this.updatesCurrentTarget(),this.$window.on(s.DEBOUNCED_SCROLL_EVENT,function(){if(this.shouldReactOnScroll){var t=this.getCurrentSectionTarget();this.updatesLocation(t),this.updatesCurrentTarget(t)}}.bind(this)),this.$window.on(s.RESIZE_EVENT,function(){this.updatesSectionPositions()}.bind(this))}.bind(this))},componentWillUnmount:function(){this.$window.off(s.LOAD_EVENT),this.$window.off(s.RESIZE_EVENT),this.$window.off(s.SCROLL_EVENT),this.$window.off(s.DEBOUNCED_SCROLL_EVENT)},render:function(){var t=!1,e=i.Children.map(this.props.children,function(e){switch(e.type){case u:return t=!0,i.cloneElement(e,{registerSection:this.registerSection,idSuffix:s.SECTION_ID_SUFFIX});case l:return i.cloneElement(e,{currentTarget:this.state.currentTarget,onItemClickCallback:this.onItemClick});default:return e}},this);if(!t)throw'A "SimpleInpagenav" component must have at least one "SimpleInpagenav.Section" child';return i.createElement("div",{className:"simple-inpagenav"},e)},shouldReactOnScroll:!0,$window:o(window),sections:{},options:r.merge({},s.DEFAULT_OPTIONS),updatesCurrentTarget:function(t){this.setState({currentTarget:t||this.getCurrentSectionTarget()})},scrollTo:function(t,e){e.onAfter=function(){this.shouldReactOnScroll=!0}.bind(this),a(t,e)},onItemClick:function(t){this.shouldReactOnScroll=!1,this.scrollTo(this.getSectionElement(t),this.getOptions().scrollTo),this.updatesLocation(t),this.setState({currentTarget:t})},getCurrentSectionTarget:function(){var t=null,e=[];for(var n in this.sections)this.sections.hasOwnProperty(n)&&e.push({target:n,pos:this.sections[n]});if(e=r.sortByOrder(e,function(t){return t.pos},["desc"]),this.scrollReachTheBottom())return t=e[0].target;for(var i=0;i<e.length;i++)if(this.isTheVisibleArea(e[i].pos)){t=e[i].target;break}return t},updatesLocation:function(t){this.initHashParams(window.location.hash?window.location.hash.substr(1):null),window.location.hash="#"+t+(Object.keys(this._hashParams).length?"?"+f.stringify(this._hashParams):"")},hasUsableLocation:function(){var t=this.getTargetFromLocation();return this.sections[t]?!0:!1},initHashParams:function(t){if(t){var e=t.match(/\?.*$/);e&&e[0]&&(this._hashParams=f.parse(e[0]))}},getHashParams:function(){return this._hashParams},getTargetFromLocation:function(){var t=window.location.hash?window.location.hash.substr(1):null;return this.initHashParams(t),t},debouncedScroll:function(){var t;this.$window.on(s.SCROLL_EVENT,function(e){t&&clearTimeout(t),t=setTimeout(function(){this.$window.trigger(s.DEBOUNCED_SCROLL_EVENT,{scrollEvent:e})}.bind(this),s.DEBOUNCED_SCROLL_EVENT_DELAY)}.bind(this))},scrollReachTheBottom:function(){return this.$window.scrollTop()+this.$window.height()===o(document).height()},isTheVisibleArea:function(t){var e=this.$window.scrollTop(),n=Math.round(this.$window.height()*this.getOptions().scrollThreshold);return t-n<e+this.getOptions().scrollOffset},getSectionElement:function(t){return o("#"+this.getSectionId(t))},getSectionId:function(t){return t+s.SECTION_ID_SUFFIX},getSectionPos:function(t){var e=o("#"+t);return Math.round(e.offset().top)},registerSection:function(t,e){if(this.sections[t])throw"Target for a section must be unique!";this.sections[t]=this.getSectionPos(e)},updatesSectionPositions:function(){for(var t in this.sections)this.sections.hasOwnProperty(t)&&(this.sections[t]=this.getSectionPos(this.getSectionId(t)))},getOptions:function(){return this.options}});d.Section=u,d.Bar=l,d.BarItem=c,e.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../constants/Constants":7,"../utils/scrollto.js":9,"./Bar":3,"./BarItem":4,"./Section":6,"query-string":1}],6:[function(t,e,n){(function(t){"use strict";var n="undefined"!=typeof window?window.React:"undefined"!=typeof t?t.React:null,i=n.createClass({displayName:"Section",componentDidMount:function(){this.props.registerSection(this.props.target,this.getId())},getId:function(){return this.props.target+(this.props.idSuffix||"")},render:function(){return n.createElement("div",{className:"simple-inpagenav-section",id:this.getId()},this.props.children)}});e.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],7:[function(t,e,n){"use strict";var i={SECTION_ID_SUFFIX:"__simple-inpagenav",DEBOUNCED_SCROLL_EVENT:"simple-inpagenav.scroll",SCROLL_EVENT:"scroll.simpleinapgenav",LOAD_EVENT:"load.simpleinpagenav",RESIZE_EVENT:"resize.simpleinpagenav",DEBOUNCED_SCROLL_EVENT_DELAY:300,DEFAULT_OPTIONS:{scrollThreshold:.4,scrollOffset:50,scrollTo:{duration:300,offset:-40}}};e.exports=i},{}],8:[function(t,e,n){"use strict";var i=t("./components/Inpagenav");i.Bar=t("./components/Bar"),i.BarItem=t("./components/BarItem"),i.Section=t("./components/Section"),e.exports=i},{"./components/Bar":3,"./components/BarItem":4,"./components/Inpagenav":5,"./components/Section":6}],9:[function(t,e,n){(function(t){"use strict";function n(t,e,r){var s=o.extend({},n.DEFAULT_OPTIONS,e||{}),a={scrollTop:t.offset().top+e.offset};i(r||"html, body").animate(a,s.duration,s.easing,s.onAfter)}var i="undefined"!=typeof window?window.$:"undefined"!=typeof t?t.$:null,o="undefined"!=typeof window?window._:"undefined"!=typeof t?t._:null,r={duration:400,offset:0,easing:"swing",onAfter:function(){}};n.DEFAULT_OPTIONS=r,e.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[8])(8)});