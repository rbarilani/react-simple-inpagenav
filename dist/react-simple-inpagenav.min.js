!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.SimpleInpagenav=t()}}(function(){return function t(e,n,i){function o(r,a){if(!n[r]){if(!e[r]){var c="function"==typeof require&&require;if(!a&&c)return c(r,!0);if(s)return s(r,!0);var l=new Error("Cannot find module '"+r+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[r]={exports:{}};e[r][0].call(u.exports,function(t){var n=e[r][1][t];return o(n?n:t)},u,u.exports,t,e,n,i)}return n[r].exports}for(var s="function"==typeof require&&require,r=0;r<i.length;r++)o(i[r]);return o}({1:[function(t,e,n){(function(n){"use strict";var i="undefined"!=typeof window?window.React:"undefined"!=typeof n?n.React:null,o=t("./BarItem"),s=i.createClass({displayName:"Bar",componentDidMount:function(){i.Children.forEach(this.props.children,function(t){this.registerItem(t.props.target)},this)},render:function(){var t=!1,e=i.Children.map(this.props.children,function(e){return e.type===o?(t=!0,i.cloneElement(e,{currentTarget:this.props.currentTarget,onClickCallback:this.props.onItemClickCallback})):e},this);if(!t)throw'A "SimpleInpagenav.Navbar" component must have at least one "SimpleInpagenav.NavbarItem" child';return i.createElement("nav",{className:"simple-inpagenav-bar"},i.createElement("ul",null,e))},items:{},registerItem:function(t){if(this.items[t])throw'Target for an "NavbarItem" must be unique!';this.items[t]=t}});e.exports=s}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./BarItem":2}],2:[function(t,e,n){(function(t){"use strict";var n="undefined"!=typeof window?window.React:"undefined"!=typeof t?t.React:null,i=n.createClass({displayName:"BarItem",propTypes:{target:n.PropTypes.string.isRequired},render:function(){var t=this.props.currentTarget===this.props.target?"active":"";return n.createElement("li",null,n.createElement("a",{href:"#"+this.props.target,className:t,onClick:this.onClick},this.props.children))},onClick:function(t){t.preventDefault(),this.props.onClickCallback(this.props.target)}});e.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(t,e,n){"use strict";var i={SECTION_ID_SUFFIX:"__simple-inpagenav",DEBOUNCED_SCROLL_EVENT:"simple-inpagenav.scroll",SCROLL_EVENT:"scroll.simpleinapgenav",LOAD_EVENT:"load.simpleinpagenav",RESIZE_EVENT:"resize.simpleinpagenav",DEBOUNCED_SCROLL_EVENT_DELAY:300,DEFAULT_OPTIONS:{scrollThreshold:.4,scrollOffset:50,scrollTo:{duration:300,offset:-40}}};e.exports=i},{}],4:[function(t,e,n){(function(n){"use strict";var i="undefined"!=typeof window?window.React:"undefined"!=typeof n?n.React:null,o=t("./Constants"),s=i.createClass({displayName:"Section",propTypes:{target:i.PropTypes.string.isRequired},componentDidMount:function(){this.props.registerSection(this.props.target,this.getId())},getId:function(){return this.props.target+o.SECTION_ID_SUFFIX},render:function(){return i.createElement("div",{className:"simple-inpagenav-section",id:this.getId()},this.props.children)}});e.exports=s}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./Constants":3}],5:[function(t,e,n){(function(n){"use strict";var i="undefined"!=typeof window?window.React:"undefined"!=typeof n?n.React:null,o="undefined"!=typeof window?window.$:"undefined"!=typeof n?n.$:null,s="undefined"!=typeof window?window._:"undefined"!=typeof n?n._:null,r="undefined"!=typeof window?window.$.scrollTo:"undefined"!=typeof n?n.$.scrollTo:null,a=t("./Constants"),c=t("./BarItem"),l=t("./Bar"),u=t("./Section"),d=i.createClass({displayName:"SimpleInpagenav",getInitialState:function(){return{currentTarget:null}},getDefaultProps:function(){return{options:s.extend({},a.DEFAULT_OPTIONS)}},componentDidMount:function(){this.$window.on(a.LOAD_EVENT,function(){this.debouncedScroll(),this.options=s.merge({},this.options,this.props.options||{}),this.hasUsableLocation()?(this.updatesCurrentTarget(this.getTargetFromLocation()),this.scrollTo(this.getSectionElement(this.getTargetFromLocation()),this.getOptions().scrollTo)):this.updatesCurrentTarget(),this.$window.on(a.DEBOUNCED_SCROLL_EVENT,function(){if(this.shouldReactOnScroll){var t=this.getCurrentSectionTarget();this.updatesLocation(t),this.updatesCurrentTarget(t)}}.bind(this)),this.$window.on(a.RESIZE_EVENT,function(){this.updatesSectionPositions()}.bind(this))}.bind(this))},componentWillUnmount:function(){this.$window.off(a.LOAD_EVENT),this.$window.off(a.RESIZE_EVENT),this.$window.off(a.SCROLL_EVENT),this.$window.off(a.DEBOUNCED_SCROLL_EVENT)},render:function(){var t=!1,e=i.Children.map(this.props.children,function(e){switch(e.type){case u:return t=!0,i.cloneElement(e,{registerSection:this.registerSection});case l:return i.cloneElement(e,{currentTarget:this.state.currentTarget,onItemClickCallback:this.onItemClick});default:return e}},this);if(!t)throw'A "SimpleInpagenav" component must have at least one "SimpleInpagenav.Section" child';return i.createElement("div",{className:"simple-inpagenav"},e)},shouldReactOnScroll:!0,$window:o(window),sections:{},options:s.merge({},a.DEFAULT_OPTIONS),updatesCurrentTarget:function(t){this.setState({currentTarget:t||this.getCurrentSectionTarget()})},scrollTo:function(t,e){e.onAfter=function(){this.shouldReactOnScroll=!0}.bind(this),r(t,e)},onItemClick:function(t){this.shouldReactOnScroll=!1,this.scrollTo(this.getSectionElement(t),this.getOptions().scrollTo),this.updatesLocation(t),this.setState({currentTarget:t})},getCurrentSectionTarget:function(){var t=null,e=[];for(var n in this.sections)this.sections.hasOwnProperty(n)&&e.push({target:n,pos:this.sections[n]});if(e=s.sortByOrder(e,function(t){return t.pos},["desc"]),this.scrollReachTheBottom())return t=e[0].target;for(var i=0;i<e.length;i++)if(this.isTheVisibleArea(e[i].pos)){t=e[i].target;break}return t},updatesLocation:function(t){window.location.hash="#"+t},hasUsableLocation:function(){var t=this.getTargetFromLocation();return this.sections[t]?!0:!1},getTargetFromLocation:function(){return window.location.hash?window.location.hash.substr(1):null},debouncedScroll:function(){var t;this.$window.on(a.SCROLL_EVENT,function(e){t&&clearTimeout(t),t=setTimeout(function(){this.$window.trigger(a.DEBOUNCED_SCROLL_EVENT,{scrollEvent:e})}.bind(this),a.DEBOUNCED_SCROLL_EVENT_DELAY)}.bind(this))},scrollReachTheBottom:function(){return this.$window.scrollTop()+this.$window.height()===o(document).height()},isTheVisibleArea:function(t){var e=this.$window.scrollTop(),n=Math.round(this.$window.height()*this.getOptions().scrollThreshold);return t-n<e+this.getOptions().scrollOffset},getSectionElement:function(t){return o("#"+this.getSectionId(t))},getSectionId:function(t){return t+a.SECTION_ID_SUFFIX},getSectionPos:function(t){var e=o("#"+t);return Math.round(e.offset().top)},registerSection:function(t,e){if(this.sections[t])throw"Target for a section must be unique!";this.sections[t]=this.getSectionPos(e)},updatesSectionPositions:function(){for(var t in this.sections)this.sections.hasOwnProperty(t)&&(this.sections[t]=this.getSectionPos(this.getSectionId(t)))},getOptions:function(){return this.options}});d.Section=u,d.Bar=l,d.BarItem=c,e.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./Bar":1,"./BarItem":2,"./Constants":3,"./Section":4}]},{},[5])(5)});